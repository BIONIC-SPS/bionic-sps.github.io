import React, { useEffect, useState } from "react";

export default function Network() {
  const [network, setNetwork] = useState([]);

  useEffect(() => {
  const el = document.getElementById("partners-root");
  const baseurl = el?.dataset?.baseurl ?? "";
  const url = `http://127.0.0.1:4000/assets/data/network.json`;

  fetch(url)
    .then((r) => {
      if (!r.ok) throw new Error(`HTTP ${r.status} for ${url}`);
      return r.json();
    })
    .then(setNetwork)
    .catch((e) => console.error("Failed to load network.json", e));
}, []);

  return (
    <div className="partner-grid">
      {network.map((p) => (
        <a key={p.name} className="partner-card" href={p.url} target="_blank" rel="noopener noreferrer">
          <div><strong>{p.name}</strong></div>
          {p.contact_email ? <div>{p.contact_email}</div> : null}
        </a>
      ))}
    </div>
  );
}